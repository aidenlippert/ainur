[build]
  # Use the docs/ directory as the Netlify base. MkDocs configuration is at the repository root
  # (../mkdocs.yml) and is invoked explicitly with -f. MkDocs is configured with docs_dir: docs
  # and site_dir: docs/site, so the generated site is written to ./site relative to this base.
  base = "docs/"
  publish = "site/"
  command = "pip install mkdocs-material mkdocs-awesome-pages-plugin mkdocs-macros-plugin mkdocs-git-revision-date-localized-plugin mkdocs-minify-plugin && mkdocs build -f ../mkdocs.yml"

[build.environment]
  PYTHON_VERSION = "3.11"

[[redirects]]
  from = "/docs/*"
  to = "/:splat"
  status = 301

[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"

[context.production]
  environment = { NODE_VERSION = "18" }

[context.deploy-preview]
  command = "mkdocs build --strict"

[context.branch-deploy]
  command = "mkdocs build"
